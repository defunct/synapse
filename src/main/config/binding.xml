<binding> 
	<mapping name="synapse" class="org.curlybraces.synapse.Synapse">
		<collection field="commands">
            <structure type="org.curlybraces.synapse.RouteProfile"/>
            <structure type="org.curlybraces.synapse.RouteMessage"/>
            <structure type="org.curlybraces.synapse.RouteToken"/>
			<structure type="org.curlybraces.synapse.Echo"/>
			<structure type="org.curlybraces.synapse.Update"/>
			<structure type="org.curlybraces.synapse.SetProfile"/>
			<structure type="org.curlybraces.synapse.InjectProfile"/>
			<structure type="org.curlybraces.synapse.InjectMessage"/>
			<structure type="org.curlybraces.synapse.InjectToken"/>
			<structure type="org.curlybraces.synapse.Callback"/>
			<structure type="org.curlybraces.synapse.ExecuteCallback"/>
		</collection>
	</mapping>
    <mapping name="token" class="org.curlybraces.synapse.Token">
        <value name="message-id" field="messageId" deserializer="java.util.UUID.fromString"/>
        <value name="date" field="date"/>
        <value name="type" field="type"/>
        <value name="word" field="word"/>
    </mapping>
    <mapping name="profile" class="org.curlybraces.synapse.Profile">
        <value name="id" field="id" deserializer="java.util.UUID.fromString"/>
        <value name="name" field="name"/>
    </mapping>
    <mapping name="message" class="org.curlybraces.synapse.Message">
        <value name="id" field="id" deserializer="java.util.UUID.fromString"/>
        <value name="date" field="date"/>
        <value name="profile-id" field="profileId" deserializer="java.util.UUID.fromString"/>
        <value name="text" field="text"/>
    </mapping>
    <mapping name="echo" class="org.curlybraces.synapse.Echo">
        <value name="message" field="message"/>
    </mapping>
    <mapping name="set-profile" class="org.curlybraces.synapse.SetProfile">
        <structure field="profile" type="org.curlybraces.synapse.Profile"/>
    </mapping>
    <mapping name="update" class="org.curlybraces.synapse.Update">
        <structure field="message" type="org.curlybraces.synapse.Message"/>
    </mapping>
    <mapping name="route-token" class="org.curlybraces.synapse.RouteToken">
        <value name="term" field="term"/>
    </mapping>
    <mapping name="route-profile" class="org.curlybraces.synapse.RouteProfile">
        <value name="profileId" field="profileId" deserializer="java.util.UUID.fromString"/>
    </mapping>
    <mapping name="route-message" class="org.curlybraces.synapse.RouteMessage">
        <value name="messageId" field="messageId" deserializer="java.util.UUID.fromString"/>
    </mapping>
    <mapping name="inject-profile" class="org.curlybraces.synapse.InjectProfile">
        <structure field="profile" type="org.curlybraces.synapse.Profile"/>
    </mapping>
    <mapping name="inject-token" class="org.curlybraces.synapse.InjectToken">
        <structure field="token" type="org.curlybraces.synapse.Token"/>
    </mapping>
    <mapping name="inject-message" class="org.curlybraces.synapse.InjectMessage">
        <structure field="message" type="org.curlybraces.synapse.Message"/>
    </mapping>
    <mapping name="callback" class="org.curlybraces.synapse.Callback">
        <value name="url" field="url" />
        <!--deserializer="org.curlybraces.synapse.JiBX.newURL"/> -->
    </mapping>
    <mapping name="execute-callback" class="org.curlybraces.synapse.ExecuteCallback">
        <value name="callback-id" field="callbackId" deserializer="java.util.UUID.fromString"/>
    </mapping>
    <mapping name="verification" class="org.curlybraces.synapse.Verification">
    	<value name="message" field="message"/>
    </mapping>
</binding>
